volumes:
  bot_logs:
  bot_tmp:

services:
  bot:
    extends:
      file: ./parents.yml
      service: custom_service
    build:
      context: ..
      target: bot
    networks:
      - bot_to_cache
      - bot_to_db
      - web_server_to_bot
    volumes:
      - bot_logs:/logs:rw
      - bot_tmp:/tmp:rw
    ports:
      - ${BOT_EXTERNAL_PORT:-127.0.0.1:8080}:8080
    environment:
        - BOT_TOKEN=${BOT_TOKEN}
        - BOT_WEBHOOK_URL=${BOT_WEBHOOK_URL}
        - BOT_WEBHOOK_URL_PATH=/bot_webhook_secret_path
        - BOT_ADMINS=${BOT_ADMINS:-[]}
        - PORT=8080
    