volumes:
  youtube_api_venv:
  youtube_api_logs:

services:
  youtube_api:
    extends:
      file: parents.yml
      service: parent
    image: ${PYTHON_IMAGE}
    working_dir: /
    entrypoint: sh /app/entrypoint.sh
    ports:
      - ${YOUTUBE_API_EXTERNAL_PORT}:8080
    environment:
      - LOGS_DIR=/logs
      - BOT_URL=http://bot:8080
      - SELENIUM_HOST=http://selenium:4444/wd/hub
      - SELENIUM_PAGE_LOAD_TIME=${YOUTUBE_API_SELENIUM_PAGE_LOAD_TIME}
      - TEST_YOUTUBE_VIDEO=$YOUTUBE_API_TEST_YOUTUBE_VIDEO
      - GOOGLE_EMAIL=$YOUTUBE_API_GOOGLE_EMAIL
      - GOOGLE_PASSWORD=$YOUTUBE_API_GOOGLE_PASSWORD
    volumes:
      - youtube_api_venv:/venv
      - youtube_api_logs:/logs
      - ../utils/Python:/utils/Python:ro
      - ../youtube_api:/app:ro